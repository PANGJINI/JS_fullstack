<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¢…í•© ì‹¤ìŠµ 02</title>
    <style>
        table {
            width: 800px;
            margin: 0 auto;
            border: 1px solid gray;
            border-collapse: collapse;
        }

        td, th {
            border: 1px solid gray;
        }

    </style>
</head>
<body>
    <h3>ğŸ’–ê²Œì‹œê¸€ ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤ìŠµ</h3>

    <input type="text" id="inputId" placeholder="userId" value=""/>
    <input type="button" id="searchIdButton" value="ì›í•˜ëŠ” ì•„ì´ë””ë¡œ ê²Œì‹œê¸€ ì°¾ê¸°">
    
    <hr>
    <button>ì „ì²´ ê²Œì‹œê¸€</button>

    <table class="postTable">
        <thead>
            <tr>
                <th>userId</th>
                <th>postId</th>
                <th>title</th>
                <th>content</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
        
    </table>
</body>
<script src="service02.js"></script>
<script src="layout02.js"></script>
<script>
    // ì „ì²´ ê²Œì‹œê¸€ ë²„íŠ¼
    const btn = document.querySelector("button");

    // íšŒì›ì´ ì…ë ¥í•œ idê°’
    const inputId = document.querySelector("input[type=text]");
    const searchIdButton = document.getElementById("searchIdButton");

    // idê°’ìœ¼ë¡œ ê²Œì‹œë¬¼ ê²€ìƒ‰í•˜ê¸°
    searchIdButton.addEventListener("click", async (e) => {

        const tbody = document.querySelector("table.postTable tbody");
        
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {method: 'get'});
        const posts = await response.json();

        let text = ``;
        const resultById = posts.filter((post) => post.userId==inputId.value)
        console.log(resultById);
        resultById.forEach((data) => {
            text += `
                <tr>
                    <td>${data.userId}</td>
                    <td>${data.id}</td>
                    <td>${data.title}</td>
                    <td>${data.body}</td>
                </tr>
            `
        })
        // ëˆ„ì ëœ íšŒì›ì˜ ì •ë³´ë¥¼ <tbody>ì— ì¶œë ¥í•œë‹¤.
        tbody.innerHTML = text;
    })


    btn.addEventListener("click", (e)=> {
        postService.findAll(postLayout.showPost);
    })

</script>
</html>