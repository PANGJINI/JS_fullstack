<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>종합 실습 02</title>
    <style>
        table {
            width: 800px;
            margin: 0 auto;
            border: 1px solid gray;
            border-collapse: collapse;
        }

        td, th {
            border: 1px solid gray;
        }

    </style>
</head>
<body>
    <h3>💖게시글 데이터 가져오기 실습</h3>

    <input type="text" id="inputId" placeholder="userId" value=""/>
    <input type="button" id="searchIdButton" value="원하는 아이디로 게시글 찾기">
    
    <hr>
    <button>전체 게시글</button>

    <table class="postTable">
        <thead>
            <tr>
                <th>userId</th>
                <th>postId</th>
                <th>title</th>
                <th>content</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
        
    </table>
</body>
<script src="service02.js"></script>
<script src="layout02.js"></script>
<script>
    // 전체 게시글 버튼
    const btn = document.querySelector("button");

    // 회원이 입력한 id값
    const inputId = document.querySelector("input[type=text]");
    const searchIdButton = document.getElementById("searchIdButton");

    // id값으로 게시물 검색하기
    searchIdButton.addEventListener("click", async (e) => {

        const tbody = document.querySelector("table.postTable tbody");
        
        const response = await fetch('https://jsonplaceholder.typicode.com/posts', {method: 'get'});
        const posts = await response.json();

        let text = ``;
        const resultById = posts.filter((post) => post.userId==inputId.value)
        console.log(resultById);
        resultById.forEach((data) => {
            text += `
                <tr>
                    <td>${data.userId}</td>
                    <td>${data.id}</td>
                    <td>${data.title}</td>
                    <td>${data.body}</td>
                </tr>
            `
        })
        // 누적된 회원의 정보를 <tbody>에 출력한다.
        tbody.innerHTML = text;
    })


    btn.addEventListener("click", (e)=> {
        postService.findAll(postLayout.showPost);
    })

</script>
</html>