<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>종합 실습 01</title>
    <style>
        table {
            width: 800px;
            margin: 0 auto;
            border: 1px solid gray;
            border-collapse: collapse;
        }

        td, th {
            border: 1px solid gray;
        }

    </style>
</head>
<body>
    <button>데이터 가져오기</button>
    <table class="user-table">
        <thead>
            <tr>
                <th>id</th>
                <th>name</th>
                <th>street</th>
                <th>suite</th>
                <th>city</th>
                <th>zipcode</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
        
    </table>
</body>
<script src="service01.js"></script>
<script src="layout.js"></script>
<script>
    // 버튼 가져오기
    const button = document.querySelector("button");

    // 이벤트 처리도 모듈화하려면?
    // const buttonClickEvent = (e) => {
    //     userService.findAll(userLayout.showList);
    // }
    // button.addEventListener("click", buttonClickEvent);


    
    // // 데이터가 출력될 부분 (tbody)
    // const tbody = document.querySelector("table.user-table tbody");

    

    
    // 버튼을 클릭했을 때 fetch로 통신
    button.addEventListener("click", async (e) => {
        // 리팩토링
        userService.findAll(userLayout.showList);


        // //const response = await fetch('https://jsonplaceholder.typicode.com/users');

        // // 서버에 데이터를 요청 (GET 방식, DEFAULT)
        // // 그동안은 fetch 뒤에 method: get이 생략된 것이었다...
        // const response = await fetch('https://jsonplaceholder.typicode.com/users', {method: 'get'});
        
        // // 서버로부터 응답받은 데이터를 JS 객체로 변환
        // const users = await response.json();
        // //console.log(users);
        // ======> service.js 로 분리함

        

        // // 추가될 데이터
        // let text = ``;

        // users.forEach((user) => {
        //     // 회원 한 명의 정보를 하나의 <tr>에 담는다.
        //     text += `
        //         <tr>
        //             <td>${user.id}</td>
        //             <td>${user.name}</td>
        //             <td>${user.address.street}</td>
        //             <td>${user.address.suite}</td>
        //             <td>${user.address.city}</td>
        //             <td>${user.address.zipcode}</td>
        //         </tr>
        //     `
        // })
        // // 누적된 회원의 정보를 <tbody>에 출력한다.
        // tbody.innerHTML = text;
    })
</script>
</html>